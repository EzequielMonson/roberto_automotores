<!-- HERO SECTION -->
<section
  class="hero-section d-flex align-items-center justify-content-center text-center"
>
  <div>
    <img
      src="assets/img/Logo.webp"
      alt="Logo Roberto Automotores"
      class="logo-banner animate-on-scroll"
      data-animation="animate__zoomIn"
    />
    <h4
      class="display-3 fw-bold animate-on-scroll subtitulo-banner"
      data-animation="animate__fadeInUp"
    >
      Tu auto, sin vueltas.
    </h4>
    <button
      class="btn btn-lg mt-3 animate-on-scroll"
      style="border: 2px solid white; color: white"
      (click)="goTo('form')"
      data-animation="animate__fadeInUp"
      href="#autos"
    >
      Contactanos
    </button>
  </div>
</section>
<!-- QUIÉNES SOMOS -->
<section
  class="py-5 text-center"
  id="nosotros"
  style="background-color: #200609"
>
  <div class="container">
    <img
      src="assets/img/Logo.webp"
      alt="Logo Roberto Automotores"
      class="logo animate-on-scroll"
      data-animation="animate__zoomIn"
    />
    <!-- <h2 class="fw-bold text-danger mb-3">Roberto Automotores</h2> -->
    <p
      class="lead animate-on-scroll parrafo-qs"
      data-animation="animate__zoomIn"
    >
      Venta de autos usados seleccionados y 0 km en Córdoba. Nos especializamos
      en brindar atención personalizada: te ayudamos a encontrar tu auto ideal,
      la financiación que mejor se adapte a vos y te acompañamos en todo el
      proceso.
    </p>
  </div>
</section>
<!-- NUESTRA AGENCIA -->
<section class="carousel-section position-relative text-white">
  <!-- Texto flotante centrado -->
  <div
    class="contenedor-titulo-na position-absolute start-50 translate-middle text-center z-3 animate-on-scroll"
    data-animation="animate__zoomIn"
  >
    <h2 class="titulo-na fw-bold display-4 text-shadow">Nuestra agencia</h2>
    <p class="subtitulo-na lead text-shadow">
      Conocé el lugar donde comienza tu próxima aventura
    </p>
  </div>

  <!-- Fondo oscuro para contraste -->
  <div
    class="position-absolute top-0 start-0 w-100 h-100 bg-black opacity-50 z-2 pointer-none"
  ></div>

  <!-- Carrusel -->
  <div
    id="agenciaCarousel"
    class="carousel slide h-100 z-1"
    data-bs-ride="carousel"
  >
    <div class="carousel-inner h-100">
      <div class="carousel-item active h-100">
        <img
          loading="lazy"
          src="assets/img/agencia/agencia1.webp"
          class="d-block w-100 h-100 object-fit-cover"
          alt="Fachada"
        />
      </div>

      <div class="carousel-item h-100">
        <img
          loading="lazy"
          src="assets/img/agencia/agencia2.webp"
          class="d-block w-100 h-100 object-fit-cover"
          alt="Interior"
        />
      </div>
    </div>

    <!-- Controles -->
    <button
      class="carousel-control-prev custom-control w-50 start-0"
      type="button"
      data-bs-target="#agenciaCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-icon-wrapper">
        <span class="carousel-control-prev-icon"></span>
      </span>
    </button>

    <button
      class="carousel-control-next custom-control w-50 end-0"
      type="button"
      data-bs-target="#agenciaCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-icon-wrapper">
        <span class="carousel-control-next-icon"></span>
      </span>
    </button>
    <!-- Indicadores -->
    <div class="carousel-indicators mt-3">
      <button
        type="button"
        data-bs-target="#agenciaCarousel"
        data-bs-slide-to="0"
        class="active"
        aria-current="true"
        aria-label="Slide 1"
      ></button>
      <button
        type="button"
        data-bs-target="#agenciaCarousel"
        data-bs-slide-to="1"
        aria-label="Slide 2"
      ></button>
    </div>
  </div>
</section>

<!-- SERVICIOS -->
<section class="py-5" id="servicios" style="background-color: #36090e">
  <div class="container text-center">
    <h2
      class="titulo-ns mb-4 fw-bold animate-on-scroll"
      data-animation="animate__fadeInUp"
    >
      ¿Qué ofrecemos?
    </h2>
    <div class="row g-4">
      <div class="col-md-4">
        <div
          class="p-4 shadow rounded h-100 animate-on-scroll"
          data-animation="animate__fadeInUp"
          style="
            background-color: #36090e;
            color: white;
            border: 1px solid white;
          "
        >
          <fa-icon
            [icon]="faCarSide"
            style="color: white; font-size: 1.2em"
          ></fa-icon>
          <h5>Autos seleccionados</h5>
          <p>Usados seleccionados y 0 km con garantía.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div
          class="p-4 shadow rounded h-100 animate-on-scroll"
          data-animation="animate__fadeInUp"
          style="
            background-color: #36090e;
            color: white;
            border: 1px solid white;
          "
        >
          <fa-icon
            [icon]="faBank"
            style="color: white; font-size: 1.2em"
          ></fa-icon>
          <h5>Financiación</h5>
          <p>Créditos rápidos a través de Bancor, Santander, etc.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div
          class="p-4 shadow rounded h-100 animate-on-scroll"
          data-animation="animate__fadeInUp"
          style="
            background-color: #36090e;
            color: white;
            border: 1px solid white;
          "
        >
          <fa-icon
            [icon]="faRotate"
            style="color: white; font-size: 1.2em"
          ></fa-icon>
          <h5>Tomamos tu usado</h5>
          <p>Recibimos tu auto como parte de pago.</p>
        </div>
      </div>
    </div>
  </div>
</section>
<section class="carousel-section-autos position-relative text-white" id="autos">
  <!-- Título flotante -->
  <div
    class="contenedor-titulo-autos animate-on-scroll"
    data-animation="animate__fadeInUp"
  >
    <h2 class="titulo-nau fw-bold display-4 text-shadow">Nuestros Autos</h2>
    <p class="subtitulo-nau lead text-shadow">
      Mirá algunos modelos disponibles
    </p>
  </div>
  <div
    id="autosCarousel"
    class="carousel slide z-1"
    data-bs-ride="carousel"
    style="width: 100%"
  >
    <div class="carousel-inner">
      <div
        *ngFor="let grupo of agruparAutos(autos); let i = index"
        class="carousel-item"
        [class.active]="i === 0"
        style="background: transparent"
      >
        <div class="container contenedor-principal-fila">
          <div class="contenedor-fila">
            <div class="item" *ngFor="let auto of grupo">
              <div
                class="contenido-item d-flex flex-column justify-content-between text-white"
                (click)="abrirOverlay(auto)"
              >
                <img
                  loading="lazy"
                  [src]="auto.imagenes[0]"
                  class="card-img-top"
                  [alt]="auto.modelo"
                  style="
                    height: 140px;
                    object-fit: cover;
                    border-top-left-radius: 8px;
                    border-top-right-radius: 8px;
                  "
                />
                <div
                  class="card-auto p-2 text-center flex-grow-1 d-flex flex-column"
                >
                  <p class="card-text" >
                    {{ auto.anio }} {{ auto.marca }} {{ auto.modelo }}
                    {{ auto.version }}
                  </p>

                  <div
                    class="btn-vermas d-inline-flex align-items-center justify-content-center gap-1 px-2 py-1  mx-auto"
                    (click)="abrirOverlay(auto)"
                  >
                    <fa-icon
                      [icon]="faEye"
                      style="color: white; font-size: 1em"
                    ></fa-icon>
                    Ver más
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Controles -->
    <button
      class="carousel-control-prev custom-control start-0"
      type="button"
      data-bs-target="#autosCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-icon-wrapper">
        <span class="carousel-control-prev-icon"></span>
      </span>
    </button>
    <button
      class="carousel-control-next custom-control end-0"
      type="button"
      data-bs-target="#autosCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-icon-wrapper">
        <span class="carousel-control-next-icon"></span>
      </span>
    </button>
  </div>
</section>
<!-- Overlay personalizado -->
<div class="custom-overlay" *ngIf="overlayAbierto">
  <div class="overlay-content bg-black p-4 rounded shadow text-dark">
    <span class="cerrar fs-4" (click)="cerrarOverlay()">✕</span>

    <div class="contenedor-controles">
      <div class="ctn-btn-overlay d-flex justify-content-center mt-2 gap-2">
        <button
          class="carousel-control-prev custom-control start-0"
          (click)="imagenAnterior()"
          style="height: 56%; top: 12%"
        >
          <span class="carousel-icon-wrapper">
            <span class="carousel-control-prev-icon"></span>
          </span>
        </button>
        <button
          class="carousel-control-next custom-control end-0"
          (click)="imagenSiguiente()"
          style="height: 56%; top: 12%"
        >
          <span class="carousel-icon-wrapper">
            <span class="carousel-control-next-icon"></span>
          </span>
        </button>
      </div>
    </div>
    <div class="ctn-carrusel-overlay text-center mb-3">
      <img
        [src]="autoSeleccionado.imagenes[imagenActual]"
        class="img-fluid rounded"
        style="max-height: 76%"
        alt="Imagen del auto"
      />
      <!-- Carrusel de miniaturas -->
      <div
        class="miniaturas-container d-flex gap-2"
        #scrollContainer
        (mousedown)="startDrag($event)"
        (mousemove)="onDrag($event)"
        (mouseup)="stopDrag()"
        (mouseleave)="stopDrag()"
        (touchstart)="startTouch($event)"
        (touchmove)="onTouchMove($event)"
        (touchend)="stopDrag()"
      >
        <img
          *ngFor="let img of autoSeleccionado.imagenes; let idx = index"
          [src]="img"
          (click)="imagenActual = idx"
          [class.selected]="imagenActual === idx"
          class="miniatura rounded shadow-sm"
          alt="Miniatura"
        />
      </div>
    </div>
    <div class="ctn-descripcion-titulo text-center">
      <h3 class="mb-3 text-center">
        {{ autoSeleccionado?.anio }} {{ autoSeleccionado?.marca }} {{ autoSeleccionado?.modelo }}
                    {{ autoSeleccionado?.version }}
      </h3>
      <div class="caracteristicas-auto">
        <p><strong>Marca:</strong> {{ autoSeleccionado?.marca }}</p>
        <p><strong>Versión:</strong> {{ autoSeleccionado?.version }}</p>
        <p><strong>Año:</strong> {{ autoSeleccionado?.anio }}</p>
        <p><strong>Combustible:</strong> {{ autoSeleccionado?.combustible }}</p>
        <p><strong>Color:</strong> {{ autoSeleccionado?.color }}</p>
        <div class="contenedor-bancos" *ngIf="autoSeleccionado?.aptoBancor">
          <fa-icon
            [icon]="faCheck"
            style="color: green; font-size: 1.2em"
          ></fa-icon>
          <p style="font-size: 1.2em; font-weight: 500">Apto Bancor</p>
          <img src="/assets/img/graficos/6.png" alt="Logo de Bancor" />
        </div>
      </div>

      <button
        class="btn whatsapp-btn"
        (click)="consultarDisponibilidad(autoSeleccionado)"
      >
        Consultar disponibilidad por WhatsApp
      </button>
    </div>
  </div>
</div>
<!-- MÉTODOS DE PAGO -->
<section class="py-5 text-white pb-5" style="background-color: black">
  <div class="container">
    <h2
      class="titulo-nau text-center fw-bold mb-5 animate-on-scroll"
      data-animation="animate__fadeInUp"
    >
      MÉTODOS DE PAGO
    </h2>

    <div class="row justify-content-center g-4">
      <!-- Financiación bancaria -->
      <div class="col-md-6">
        <div
          class="card-metodo h-100 text-center p-4 animate-on-scroll"
          data-animation="animate__fadeInLeft"
        >
          <h4 class="fw-bold mb-3">
            <i class="fa-solid fa-landmark me-2"></i>
            Financiación bancaria
          </h4>
          <p class="lead mb-4">
            Trabajamos con los principales bancos para ofrecerte planes de
            financiación accesibles, seguros y rápidos.
          </p>
          <div
            class="d-flex flex-wrap justify-content-center gap-3 align-items-center"
          >
            <img src="assets/img/graficos/6.png" alt="Bancor" height="40" />
            <img src="assets/img/graficos/5.png" alt="Santander" height="40" />
            <img
              src="assets/img/graficos/4.png"
              alt="Supervielle"
              height="40"
            />
          </div>
        </div>
      </div>

      <!-- Tarjeta de crédito -->
      <div class="col-md-6">
        <div
          class="card-metodo h-100 text-center p-4 animate-on-scroll"
          data-animation="animate__fadeInRight"
        >
          <h4 class="fw-bold mb-3">
            <i class="fa-solid fa-credit-card me-2"></i>
            Pago con tarjeta de crédito
          </h4>
          <p class="lead mb-4">
            Cubrí la entrega con tu tarjeta y llevate el auto en el acto.
            <strong>Pagalo en cuotas fijas</strong> y empezá a disfrutarlo hoy.
          </p>
          <button class="btn btn-outline-light mt-2" (click)="goTo('form')">
            Consultanos ahora
          </button>
        </div>
      </div>
    </div>

    <div class="text-center mt-5">
      <p class="fw-semibold fst-italic" style="opacity: 0.8">
        Entrega inmediata. Financiación clara. Todo en un solo lugar.
      </p>
    </div>
  </div>
</section>

<!-- VALORES -->
<section id="valores" class="valores-section position-relative">
  <!-- Overlay decorativo -->
  <div class="overlay-shape"></div>

  <div class="container text-center position-relative z-2">
    <h2
      class="valores-title animate-on-scroll"
      data-animation="animate__fadeInUp"
    >
      Nuestros valores
    </h2>

    <!-- Primera fila: 3 valores -->
    <div class="row justify-content-center g-4 mb-4">
      <div
        class="col-md-4 animate-on-scroll"
        data-animation="animate__fadeInUp"
      >
        <div class="valor-item">
          <fa-icon [icon]="faShield"></fa-icon>
          <h5 class="mt-3">Confianza</h5>
          <p>Brindamos seguridad en cada paso del proceso.</p>
        </div>
      </div>
      <div
        class="col-md-4 animate-on-scroll"
        data-animation="animate__fadeInUp"
      >
        <div class="valor-item">
          <fa-icon [icon]="faBolt"></fa-icon>
          <h5 class="mt-3">Agilidad</h5>
          <p>Procesos rápidos y soluciones al instante.</p>
        </div>
      </div>
      <div
        class="col-md-4 animate-on-scroll"
        data-animation="animate__fadeInUp"
      >
        <div class="valor-item">
          <fa-icon [icon]="faSearch"></fa-icon>
          <h5 class="mt-3">Transparencia</h5>
          <p>Información clara, sin letras chicas ni vueltas.</p>
        </div>
      </div>
    </div>

    <!-- Segunda fila: 2 valores centrados -->
    <div class="row justify-content-center g-4">
      <div
        class="col-md-4 animate-on-scroll"
        data-animation="animate__fadeInUp"
      >
        <div class="valor-item">
          <fa-icon [icon]="faHandHoldingHand"></fa-icon>
          <h5 class="mt-3">Cercanía</h5>
          <p>Te acompañamos desde el primer momento.</p>
        </div>
      </div>
      <div
        class="col-md-4 animate-on-scroll"
        data-animation="animate__fadeInUp"
      >
        <div class="valor-item">
          <fa-icon [icon]="faTools"></fa-icon>
          <h5 class="mt-3">Resolución</h5>
          <p>Encontramos soluciones reales a tus necesidades.</p>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- CONTACTO -->
<section class="" id="contacto" style="background-color: #000000; color: #fff">
  <div class="">
    <div class="contenedor-contacto row align-items-center">
      <!-- Columna izquierda -->
      <div
        class="item-contacto-i col-md-6 text-center text-md-start mb-4 mb-md-0 animate-on-scroll"
        data-animation="animate__fadeInLeft"
      >
        <img
          src="/assets/img/graficos/2.webp"
          alt="Banner Roberto Automotores"
        />
      </div>

      <!-- Columna derecha -->
      <div class="item-contacto-d col-md-6 text-center">
        <img
          src="assets/img/Logo.webp"
          alt="Logo Roberto Automotores"
          class="logo animate-on-scroll"
          data-animation="animate__zoomIn"
        />
        <button
          class="btn btn-lg mt-3 animate-on-scroll"
          style="border: 2px solid white; color: white"
          (click)="goTo('form')"
          data-animation="animate__fadeInUp"
          href="#autos"
        >
          Contactanos
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Botón flotante -->
<button class="btn rounded-circle chat-float-btn" (click)="openChat()">
  <fa-icon [icon]="faComments" style="color: white; font-size: 1.2em"></fa-icon>
</button>
<button
  onclick="window.open('https://wa.me/5493516348790', '_blank')"
  class="btn rounded-circle whatsapp-float"
  target="_blank"
  rel="noopener"
>
  <img
    src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg"
    alt="WhatsApp"
  />
</button>

<!-- Botón flotante para subir -->
<button
  class="btn rounded-circle btn-subir"
  [class.visible]="showScrollButton"
  (click)="scrollToTop()"
>
  <fa-icon [icon]="faArrowUp" style="color: white; font-size: 1em"></fa-icon>
</button>

<!-- Chat overlay -->
<app-chat [showChat]="isChatOpen" (closeChat)="closeChat()"></app-chat>
